(()=>{var F=(r=>(r[r.CENTER=1]="CENTER",r[r.FLEX_END=2]="FLEX_END",r[r.FLEX_START=3]="FLEX_START",r[r.STRETCH=4]="STRETCH",r))(F||{}),g=(e=>(e[e.COLUMN=1]="COLUMN",e[e.ROW=2]="ROW",e))(g||{}),x=(s=>(s[s.CENTER=1]="CENTER",s[s.FLEX_END=2]="FLEX_END",s[s.FLEX_START=3]="FLEX_START",s[s.SPACE_AROUND=4]="SPACE_AROUND",s[s.SPACE_BETWEEN=5]="SPACE_BETWEEN",s))(x||{});var c={width:"setX",height:"setY"};function y(i,t){let e=c[t],n=t=="width"?f(i):m(i),r=i[t]/2+n;i.items.forEach(s=>{s.setOrigin(0,0);let h=r-s[t]/2;s[e](h)})}function N(i,t){let e=c[t],n=t=="width"?f(i):m(i),r=i[t]-2*i.padding,s=n+i.padding;i.items.forEach(h=>{h._isFlex&&(h[e](s),h[t]>r&&(r=h[t]))}),i.items.forEach((h,a)=>{if(!h._isFlex)return;t=="width"?i._widths[a]=h[t]:i._heights[a]=h[t];let U=t=="width"?[r,h.height]:[h.width,r];b(h,...U)})}function M(i,t){return i=="width"&&t==2||i=="height"&&t==1}function _(i,t){let e=i.items,n=c[t],r=i._bounds[t=="width"?"right":"bottom"];for(let s=e.length-1;s>=0;s--){let h=e[s];h.setOrigin(0,0),h[n](r-h[t]),M(t,i.flexDirection)&&(r-=h[t]+i.itemsMargin)}}function H(i,t){let e=c[t],n=t=="width"?f(i):m(i),r=d(i),h=i[t]/2+n-r/2;i.items.forEach(a=>{a.setOrigin(0,0),a[e](h),h+=a[t]+i.itemsMargin})}function p(i,t){let e=c[t],n=i._bounds[t=="width"?"left":"top"];i.items.forEach(r=>{r.setOrigin(0,0),r[e](n),M(t,i.flexDirection)&&(n+=r[t]+i.itemsMargin)})}function L(i,t,e){let n=e+i.padding*2;n>i[t]&&(i[t]=n),W(i)}function T(i,t){L(i,"height",t)}function E(i,t){L(i,"width",t)}function I(i,t){let e=w(i),n=c[t],r=i._bounds[t=="width"?"left":"top"];i.items.forEach(s=>{Y(i,s,e),s.setOrigin(0,0),s[n](r),r+=s[t]+i.itemsMargin})}function G(i){I(i,"width")}function B(i){I(i,"height")}function k(i,t){let e=i[`_${t}s`].length?Math.max(...i[`_${t}s`]):0;i[t]=e+2*i.padding,W(i)}function P(i){k(i,"height")}function O(i,t){let e=i.width-i.padding*2;t.setWordWrapWidth(e);let n=t.getBounds();t.setFixedSize(e,n.height)}function X(i){k(i,"width")}function w(i){return(i.flexDirection==2?i.width:i.height)-d(i)-2*i.padding}function d(i){let t=(i.items.length-1)*i.itemsMargin;return i._basisSum+t}function f(i){return i.x-i.width*i.origin.x}function m(i){return i.y-i.height*i.origin.y}function R(i){for(let t=0;t<i.items.length;t++){let e=i.items[t];b(e,e.width,i._heights[t]),e.height=i._heights[t]}}function D(i){for(let t=0;t<i.items.length;t++){let e=i.items[t];b(e,i._widths[t],e.height),e.width=i._widths[t]}}function l(i,t){if(t==6){N(i,"width");return}if(i.flexDirection==2){let e=w(i);if(i._growSum&&e>=0||e<0){G(i);return}}if(t==4){if(i.flexDirection==2){p(i,"width");return}p(i,"width");return}if(t==5){if(i.flexDirection==2){_(i,"width");return}_(i,"width");return}if(t==2){i.flexDirection==2?H(i,"width"):y(i,"width");return}}function u(i,t){if(t==6){N(i,"height");return}if(i.flexDirection==1){let e=w(i);if(i._growSum&&e>=0||e<0){B(i);return}}if(t==7){if(i.flexDirection==1){p(i,"height");return}p(i,"height");return}if(t==1){if(i.flexDirection==1){_(i,"height");return}_(i,"height");return}if(t==2){i.flexDirection==1?H(i,"height"):y(i,"height");return}}function b(i,t,e){if(i.type=="Text"){if(i.height!=e)return;i.setWordWrapWidth(t),i.setFixedSize(t,e);return}i.setDisplaySize(t,e)}function o(i){W(i),i.setJustifyContent(i.justifyContent),i.setAlignItems(i.alignItems)}function Y(i,t,e){let n=i.flexDirection==2,r=n?"width":"height",s=0;e>=0&&(s=t.flexGrow/i._growSum*e+t.basis),e<0&&(s=t.flexShrink*t.basis/i._basisSum*e+t.basis),n?b(t,s,t.height):b(t,t.width,s),t[r]=s}function C(i){let t=i.flexDirection==2?"width":"height",e=c[t],n=w(i),r=0,s=t=="width"?f(i):m(i);i.justifyContent==4?(r=n/(i.items.length+1),s+=i.padding+r):(r=n/(i.items.length-1),s+=i.padding),i.items.forEach(h=>{h.setOrigin(0,0),h[e](s),s+=h[t]+r+i.itemsMargin})}function W(i){let t=f(i),e=m(i);i._bounds={left:t+i.padding,right:t+i.width-i.padding,top:e+i.padding,bottom:e+i.height-i.padding}}var S=class{x;y;width;height;padding;itemsMargin;alignItems;flexDirection;justifyContent;items;origin;basis;scene;flexGrow;flexShrink;_fparent;ff;_scrollFactorX;_scrollFactorY;_isFlex;_basisSum;_heights;_widths;_growSum;_bounds;constructor(t,e){return this.scene=t,this.x=e.x||0,this.y=e.y||0,this.width=e.width==null?t.scale.width:e.width,this.height=e.height||0,this.padding=e.padding||10,this.itemsMargin=e.itemsMargin||4,this.alignItems=e.alignItems||1,this.flexDirection=e.flexDirection||2,this.justifyContent=e.justifyContent||3,this.items=[],this.origin={x:0,y:0},this._scrollFactorX=0,this._scrollFactorY=0,this._fparent=null,this._isFlex=!0,this._basisSum=0,this._heights=[],this._widths=[],this._growSum=0,this._bounds={left:0,right:0,top:0,bottom:0},this}add(t,e=0,n=1){return t.setOrigin(0,0),t.setScrollFactor(this._scrollFactorX,this._scrollFactorY),t._isFlex?(t.flexGrow=e,t.flexShrink=n,t._fparent=this):(t.flexGrow=0,t.flexShrink=0),this.width&&t.type=="Text"&&this.flexDirection==1&&O(this,t),t.basis=this.flexDirection==2?t.width:t.height,this._basisSum+=t.basis,this.items.push(t),this._heights.push(t.height),this._widths.push(t.width),this._growSum+=t.flexGrow,this.flexDirection==2&&(T(this,t.height),t._isFlex||E(this,d(this))),this.flexDirection==1&&(E(this,t.width),t._isFlex||T(this,d(this))),o(this),this._fparent&&(this._fparent.flexDirection==2?T(this._fparent,this.height):E(this._fparent,this.width),o(this._fparent)),this}clear(){return this.items.forEach(t=>{t._isFlex&&t.clear()}),this.items.forEach(t=>t.destroy()),this.items=[],this._heights=[],this._widths=[],this._basisSum=0,this}remove(t,e){if(this.items[t]==null)return;let n=this.items[t];return n._fparent=null,this._basisSum-=n.basis,this.items.splice(t,1),this._heights.splice(t,1),this._widths.splice(t,1),e&&n.destroy(),this.flexDirection==2&&P(this),this.flexDirection==1&&X(this),o(this),this}setDisplaySize(t,e){return this.setWidth(t),this.setHeight(e),this}destroy(){this.clear(),this.items=null,this._widths=null,this._heights=null,this._bounds=null,this.origin=null,this._fparent=null}setAlignItems(t){switch(this.alignItems==4&&t!=4&&(this.flexDirection==2?R(this):D(this)),this.alignItems=t,t){case 1:this.flexDirection==2?u(this,2):l(this,2);break;case 3:this.flexDirection==2?u(this,7):l(this,4);break;case 2:this.flexDirection==2?u(this,1):l(this,5);break;case 4:this.flexDirection==2?u(this,6):l(this,6);break;default:break}return this}setHeight(t){return this.height=t,R(this),o(this),this}setWidth(t){if(this.width=t,D(this),this.flexDirection==1)for(let e=0;e<this.items.length;e++){let n=this.items[e];n.type=="Text"&&O(this,n)}return o(this),this}setJustifyContent(t){switch(this.justifyContent=t,t){case 1:this.flexDirection==2?l(this,2):u(this,2);break;case 3:this.flexDirection==2?l(this,4):u(this,7);break;case 2:this.flexDirection==2?l(this,5):u(this,1);break;case 4:C(this);break;case 5:C(this);break;default:break}return this}setOrigin(t,e){return e==null&&(e=t),this.origin.x=t,this.origin.y=e,t>1&&(this.origin.x=1),t<0&&(this.origin.x=0),e>1&&(this.origin.y=1),e<0&&(this.origin.y=0),o(this),this}setScrollFactor(t,e){t>1&&(t=1),t<0&&(t=0),e||(e=t),this._scrollFactorX=t,this._scrollFactorY=e;for(let n=0;n<this.items.length;n++)this.items[n].setScrollFactor(t,e);return this}setX(t){return this.x=t,o(this),this}setY(t){return this.y=t,o(this),this}};typeof window<"u"&&(globalThis.Fbx={Flex:S,AlignItems:F,FlexDirection:g,JustifyContent:x});})();
